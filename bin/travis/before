#!/usr/bin/env bash

# This script is sourced as the travis before-script.

# Store old shell options
shopt_old=$-;

set -x;

crate_dir="$( cd $(dirname ${BASH_SOURCE[0]})/../..; pwd )";

cd ${crate_dir};

# Install geckodriver
bin/download_geckodriver;
export PATH=$PATH:$HOME/.cargo/bin:$crate_dir/bin;

# Install chromedriver
bin/download_chromedriver;
export CHROME_BIN=/usr/bin/google-chrome-stable
export CHROME_HEADLESS=1

# Show bin locations
which firefox;
which geckodriver;
which chromedriver;

# Restore old shell options
if [[ ${shopt_old} != *"x"* ]]; then
    set +x;
fi
